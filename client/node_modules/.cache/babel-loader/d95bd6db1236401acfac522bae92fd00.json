{"ast":null,"code":"var _jsxFileName = \"/Users/jaredspickard/Development/cruise-coordinator/src/auth/Authentication.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n// /src/hooks/useAuth.tsx\nimport React, { useState, createContext, useContext, useEffect } from \"react\"; // Create the context \n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  // Store boolean to indicate whether a user is authenticated (default false)\n  const [authed, setAuthed] = useState(false); // Store new value to indicate the call has not finished (default true)\n\n  const [loading, setLoading] = useState(true);\n\n  const login = async googleData => {\n    // log in to the server\n    const loginResult = await asyncServerLogin(googleData.tokenId); // if successful, set authed var to true\n\n    if (loginResult) {\n      console.log('Cruiser logged in successfully.');\n      setAuthed(true);\n    }\n  };\n\n  const logout = async () => {\n    const logoutResult = await asyncServerLogout();\n\n    if (logoutResult) {\n      console.log('Cruiser logged out successfully.');\n      setAuthed(false);\n    }\n  };\n\n  const asyncServerLogin = async googleTokenId => {\n    const resp = await fetch('/api/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        token: googleTokenId\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await resp.json();\n\n    if (data) {\n      return data.logged_in;\n    } else {\n      return false;\n    }\n  };\n\n  const asyncServerLogout = async () => {\n    const resp = await fetch('/api/logout');\n    const data = await resp.json();\n\n    if (data) {\n      return data.logged_out;\n    } else {\n      return false;\n    }\n  }; // Runs once when the component first mounts\n\n\n  useEffect(() => {\n    asyncServerAuthCheck().then(authenticatedUser => {\n      if (authenticatedUser) {\n        setAuthed(true);\n        setLoading(false);\n      } else {\n        setAuthed(false);\n        setLoading(false);\n      }\n    });\n  }, []); // Verify authentication with server\n\n  const asyncServerAuthCheck = async () => {\n    const resp = await fetch('/api/auth');\n    const data = await resp.json();\n\n    if (data) {\n      return data.authenticated;\n    } else {\n      return false;\n    }\n  };\n\n  return (\n    /*#__PURE__*/\n    // Expose the new `loading` value so we can consume it in `App.tsx`\n    _jsxDEV(AuthContext.Provider, {\n      value: {\n        authed,\n        setAuthed,\n        login,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  );\n}; // Finally creating the custom hook \n\n_s(AuthProvider, \"HuesLFcUfohR0V6QuaSQ08eev30=\");\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/jaredspickard/Development/cruise-coordinator/src/auth/Authentication.js"],"names":["React","useState","createContext","useContext","useEffect","AuthContext","AuthProvider","children","authed","setAuthed","loading","setLoading","login","googleData","loginResult","asyncServerLogin","tokenId","console","log","logout","logoutResult","asyncServerLogout","googleTokenId","resp","fetch","method","body","JSON","stringify","token","headers","data","json","logged_in","logged_out","asyncServerAuthCheck","then","authenticatedUser","authenticated","useAuth"],"mappings":"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","sourcesContent":["// /src/hooks/useAuth.tsx\nimport React, { useState, createContext, useContext, useEffect } from \"react\";\n\n// Create the context \nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n   // Store boolean to indicate whether a user is authenticated (default false)\n   const [authed, setAuthed] = useState(false);\n   // Store new value to indicate the call has not finished (default true)\n   const [loading, setLoading] = useState(true);\n\n   const login = async (googleData) => {\n      // log in to the server\n      const loginResult = await asyncServerLogin(googleData.tokenId);\n      // if successful, set authed var to true\n      if (loginResult) {\n         console.log('Cruiser logged in successfully.');\n         setAuthed(true);\n      }\n   }\n\n   const logout = async () => {\n      const logoutResult = await asyncServerLogout();\n      if (logoutResult) {\n         console.log('Cruiser logged out successfully.');\n         setAuthed(false);\n      }\n   }\n\n   const asyncServerLogin = async (googleTokenId) => {\n      const resp = await fetch('/api/login', {\n         method: 'POST',\n         body: JSON.stringify({\n             token: googleTokenId\n         }),\n         headers: {\n             'Content-Type': 'application/json'\n         }\n     });\n     const data = await resp.json();\n     if (data) {\n         return data.logged_in;\n     } else {\n        return false;\n     }\n   }\n\n   const asyncServerLogout = async () => {\n      const resp = await fetch('/api/logout');\n      const data = await resp.json();\n      if (data) {\n         return data.logged_out;\n      } else {\n         return false;\n      }\n   }\n\n   // Runs once when the component first mounts\n   useEffect(() => {\n      asyncServerAuthCheck().then((authenticatedUser) => {\n         if (authenticatedUser) {\n            setAuthed(true);\n            setLoading(false);\n         } else {\n            setAuthed(false);\n            setLoading(false);\n         }\n      });\n   }, []);\n\n   // Verify authentication with server\n   const asyncServerAuthCheck = async () => {\n      const resp = await fetch('/api/auth');\n      const data = await resp.json();\n      if (data) {\n         return data.authenticated;\n      } else {\n         return false;\n      }\n   }\n\n   return (\n      // Expose the new `loading` value so we can consume it in `App.tsx`\n      <AuthContext.Provider\n         value={{ authed, setAuthed, login, logout, loading }}\n      >\n         {children}\n      </AuthContext.Provider>\n   );\n}\n\n// Finally creating the custom hook \nexport const useAuth = () => useContext(AuthContext);"]},"metadata":{},"sourceType":"module"}